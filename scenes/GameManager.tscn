[gd_scene load_steps=18 format=3 uid="uid://1xr5qopgm57i"]

[ext_resource type="Script" uid="uid://ndmr52dllwad" path="res://scripts/global/GameManager.gd" id="1_34tde"]
[ext_resource type="Resource" uid="uid://v0x75ukrrln7" path="res://assets/resources/player/player.tres" id="2_3dus2"]
[ext_resource type="Resource" uid="uid://befliksktihyd" path="res://assets/resources/kingdom.tres" id="3_1jauj"]
[ext_resource type="Script" uid="uid://dmmt046g5n2t" path="res://scripts/ui/inventory_box.gd" id="3_4dhvd"]
[ext_resource type="Script" uid="uid://cn074wlyew4kj" path="res://scripts/resources/item.gd" id="4_55cbs"]
[ext_resource type="Resource" uid="uid://83niltrh6tky" path="res://assets/resources/items/stick.tres" id="5_r03xe"]
[ext_resource type="Texture2D" uid="uid://bqsqxj72w87cb" path="res://assets/ui/inventory.png" id="5_rtub8"]
[ext_resource type="Resource" uid="uid://bu7fdkkvvrka3" path="res://assets/resources/items/tiles/iron_item.tres" id="6_440lp"]
[ext_resource type="Script" uid="uid://emqvl3xrerc8" path="res://scripts/ui/buildable_items.gd" id="6_jg7te"]
[ext_resource type="Texture2D" uid="uid://dcduqa82fhmrm" path="res://assets/models/icons/bricks_preview.tres" id="7_2uts2"]
[ext_resource type="Resource" uid="uid://bl24ijs603hmr" path="res://assets/resources/items/axe.tres" id="7_440lp"]
[ext_resource type="Texture2D" uid="uid://c7im14pt3acjp" path="res://assets/models/icons/dirt_slope_preview.tres" id="8_2chjq"]
[ext_resource type="Script" uid="uid://bcjlebgfecmc6" path="res://scripts/ui/message_box.gd" id="9_1jauj"]
[ext_resource type="PackedScene" uid="uid://cstkdjjdwrtap" path="res://scenes/ui/hotbar/hotbar.tscn" id="9_2chjq"]
[ext_resource type="Script" uid="uid://fqsogyq7ugts" path="res://scripts/ui/equipment/equipment_box.gd" id="10_4arur"]
[ext_resource type="PackedScene" uid="uid://odwppmv1aea3" path="res://scenes/ui/equipment/equipment_bar.tscn" id="10_biy4i"]

[sub_resource type="CanvasItemMaterial" id="CanvasItemMaterial_1jauj"]
blend_mode = 4

[node name="GameManager" type="Node"]
script = ExtResource("1_34tde")
player = ExtResource("2_3dus2")
kingdom = ExtResource("3_1jauj")
testing_items = Array[ExtResource("4_55cbs")]([ExtResource("5_r03xe"), ExtResource("6_440lp"), ExtResource("7_440lp")])

[node name="QuestBox" type="CanvasLayer" parent="."]

[node name="QuestContainer" type="VBoxContainer" parent="QuestBox"]
offset_right = 552.0
offset_bottom = 660.0

[node name="InventoryBox" type="CanvasLayer" parent="."]
visible = false
script = ExtResource("3_4dhvd")

[node name="Control" type="Control" parent="InventoryBox"]
layout_mode = 3
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -20.0
offset_top = -20.0
offset_right = 20.0
offset_bottom = 20.0
grow_horizontal = 2
grow_vertical = 2

[node name="TextureRect" type="TextureRect" parent="InventoryBox/Control"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -597.5
offset_top = -447.5
offset_right = 597.5
offset_bottom = 447.5
grow_horizontal = 2
grow_vertical = 2
texture = ExtResource("5_rtub8")
expand_mode = 3
stretch_mode = 4

[node name="InventoryLabel" type="RichTextLabel" parent="InventoryBox/Control"]
layout_mode = 0
offset_left = -393.0
offset_top = -386.0
offset_right = 435.0
offset_bottom = -311.0
theme_override_colors/default_color = Color(0, 0, 0, 1)
theme_override_font_sizes/normal_font_size = 40
text = "Inventory"
fit_content = true
horizontal_alignment = 1

[node name="Items" type="Control" parent="InventoryBox/Control"]
anchors_preset = 0
offset_left = -556.0
offset_top = -312.0
offset_right = 596.0
offset_bottom = 376.0

[node name="BuildingBox" type="CanvasLayer" parent="."]
visible = false
script = ExtResource("6_jg7te")

[node name="BuildableItems" type="ItemList" parent="BuildingBox"]
visible = false
material = SubResource("CanvasItemMaterial_1jauj")
anchors_preset = 2
anchor_top = 1.0
anchor_bottom = 1.0
offset_top = -693.0
offset_right = 103.0
offset_bottom = -345.0
grow_vertical = 0
scale = Vector2(2, 2)
item_count = 2
same_column_width = true
fixed_column_width = 64
icon_mode = 0
fixed_icon_size = Vector2i(64, 64)
item_0/icon = ExtResource("7_2uts2")
item_1/icon = ExtResource("8_2chjq")

[node name="HotBar" parent="BuildingBox" instance=ExtResource("9_2chjq")]

[node name="EquipmentBox" type="CanvasLayer" parent="."]
visible = false
script = ExtResource("10_4arur")

[node name="EquipmentBar" parent="EquipmentBox" instance=ExtResource("10_biy4i")]
anchors_preset = 3
anchor_left = 1.0
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = -40.0
offset_top = -40.0
offset_right = 0.0
offset_bottom = 0.0
grow_horizontal = 0
grow_vertical = 0

[node name="MessageBox" type="CanvasLayer" parent="."]
visible = false
script = ExtResource("9_1jauj")

[node name="VBoxContainer" type="VBoxContainer" parent="MessageBox"]
anchors_preset = 1
anchor_left = 1.0
anchor_right = 1.0
offset_left = -324.0
offset_bottom = 576.0
grow_horizontal = 0

[node name="Text" type="RichTextLabel" parent="MessageBox/VBoxContainer"]
layout_mode = 2
theme_override_colors/default_color = Color(0, 0, 0, 1)
theme_override_font_sizes/normal_font_size = 20
text = "Text"
fit_content = true
tab_size = 2
horizontal_alignment = 2
vertical_alignment = 1

[connection signal="build_back" from="." to="BuildingBox/HotBar" method="_on_build_back"]
[connection signal="build_next" from="." to="BuildingBox/HotBar" method="_on_build_next"]
[connection signal="hide_building" from="." to="BuildingBox" method="_on_hide_building"]
[connection signal="hide_inventory" from="." to="InventoryBox" method="_on_hide_inventory"]
[connection signal="inventory_update" from="." to="BuildingBox/HotBar" method="_on_game_manager_inventory_update"]
[connection signal="inventory_update" from="." to="EquipmentBox" method="_on_inventory_update"]
[connection signal="inventory_update" from="." to="EquipmentBox/EquipmentBar" method="_on_game_manager_inventory_update"]
[connection signal="show_building" from="." to="BuildingBox" method="_on_show_building"]
[connection signal="show_inventory" from="." to="InventoryBox" method="_on_show_inventory"]
[connection signal="show_message" from="." to="MessageBox" method="_on_show_message"]
[connection signal="tool_back" from="." to="EquipmentBox/EquipmentBar" method="_on_tool_back"]
[connection signal="tool_next" from="." to="EquipmentBox/EquipmentBar" method="_on_tool_next"]
